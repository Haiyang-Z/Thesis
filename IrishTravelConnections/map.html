<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>IrishTravelConnections</title>
    <meta name="description" content="Meet your new partner">
    <meta name="author" content="Haiyang Zheng">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!-- CSS -->
    <link rel="stylesheet" href="css/zerogrid.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
</head>

<body>
    <div class="wrap-body">
        <header class="no-bg">
            <div class="nav-bar">
                <div class="wrap-nav zerogrid">
                    <div class="row">
                        <div class="col-1-3">
                            <div class="wrap-col">
                                <div class="logo"><a href="#"><img src="images/logo.png" /></a></div>
                            </div>
                        </div>
                        <div class="col-2-3">
                            <div class="wrap-col f-right">
                                <div id="menu">
                                    <nav>
                                        <ul>
                                            <li><a href="home.html">Home</a></li>
                                            <li class="active"><a href="map.html">Map</a></li>
                                            <li><a href="match.html">Match</a></li>
                                            <li><a href="contact.html">Contact</a></li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- Container -->
        <section id="container">
            <div class="wrap-container">
                <!-- Map Section -->
                <span class="map-title">Choose your travel destination!</span>
                <section id="map-section">
                    <div id="map"></div>
                </section>






                <!-- new stuff here -->














            </div>
        </section>

        <!--////////////////////////////////////Footer-->
        <footer>
            <div class="zerogrid">
                <div class="wrap-footer">
                    <div class="row">
                        <!-- Company Info -->
                        <div class="col-1-3">
                            <div class="wrap-col">
                                <p>Mardyke Hall, Mardyke Walk, Cork, Ireland</p>
                                <p>Email: 123104052@umail.ucc.ie</p>
                                <p>Phone: +353 87 7050685</p>
                            </div>
                        </div>
                        <!-- Quick Links -->
                        <div class="col-1-3">
                            <div class="wrap-col quick-links">
                                <h3>Quick Links</h3>
                                <ul>
                                    <li><a href="home.html">Home</a></li>
                                    <li><a href="map.html">Map</a></li>
                                    <li><a href="match.html">Match</a></li>
                                    <li><a href="contact.html">Contact</a></li>
                                </ul>
                            </div>
                        </div>
                        <!-- Latest News -->
                        <div class="col-1-3">
                            <div class="wrap-col latest-news">
                                <h3>Latest News</h3>
                                <ul>
                                    <li><a
                                            href="https://www.ireland.ie/en/china/beijing/services/visas/check-if-you-need-a-visa/">Visa
                                            Requirements for Chinese Tourists</a></li>
                                    <li><a
                                            href="https://www.citizensinformation.ie/en/travel-and-recreation/travel-to-ireland/customs-regulations-for-travellers/">Customs
                                            Regulations in Ireland</a></li>
                                    <li><a
                                            href="https://www.ireland.ie/en/dfa/overseas-travel/know-before-you-go/safety-and-security/">Health
                                            and Safety Guidelines</a></li>
                                    <li><a href="https://www.multitrip.com/ie/travel-insurance">Travel Insurance
                                            Recommendations</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Copyright Info -->
                    <div class="row">
                        <div class="col-full">
                            <div class="wrap-col">
                                <p style="text-align: center;">&copy; 2024 IrishTravelConnections. All Rights Reserved.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // 定义爱尔兰的边界
        var bounds = [
            [51.3, -10.5], // 西南坐标
            [55.4, -5.4]   // 东北坐标
        ];

        // 初始化地图并设置最大边界和初始视图
        var map = L.map('map', {
            maxBounds: bounds,
            maxBoundsViscosity: 1.0, // 控制地图拖动到边界时的粘滞度
            worldCopyJump: true
        }).setView([53.3498, -6.2603], 7); // 将初始视图设置为爱尔兰，缩放级别为7

        // 添加地图图层
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // 加载标记数据
        fetch('json/data.json')
            .then(response => response.json())
            .then(data => {
                data.forEach(marker => {
                    var markerInstance = L.marker(marker.coordinates)
                        .addTo(map);

                    // 创建一个div元素，作为popup的内容
                    var popupContent = L.DomUtil.create('div');

                    // 设置HTML内容
                    popupContent.innerHTML = `
                <b>${marker.title}</b><br>
                <img src="${marker.img}" alt="${marker.title}" style="width: 100px; height: auto;"><br>
                ${marker.date}<br>
                ${marker.is_open ? 'Openning' : 'Closed'}<br>
                Tickets: ${marker.ticket_price}<br>
            `;

                    // 创建按钮元素
                    var button = L.DomUtil.create('button', '', popupContent);
                    button.innerHTML = marker.button_label;

                    // 绑定点击事件
                    button.onclick = function () {
                        matchFriend(marker.title);
                    };

                    markerInstance.bindPopup(popupContent);

                    // 点击标记时打开popup
                    markerInstance.on('click', function () {
                        markerInstance.openPopup();
                    });

                    // 移除了鼠标移出标记时关闭弹窗的功能
                });
            })
            .catch(error => console.error('Error loading markers:', error));

        // 定义按钮点击事件处理函数
        function matchFriend(title) {
            // 将景点标题作为查询参数附加到URL
            const encodedTitle = encodeURIComponent(title);
            window.location.href = `match.html?title=${encodedTitle}`;
        }



    </script>




</body>

</html>